# MyShuttle-Java-App

This project involves setting up two servers: one for building the application and another for deploying it. The build server uses Maven, and the deploy server uses Apache Tomcat for hosting the `.war` file.

## Project Overview

- **Build Server**: Uses Maven to compile and package the Java application.
- **Deploy Server**: Uses Tomcat to deploy the `.war` file.

## ğŸ“ Project Structure

Hereâ€™s a high-level structure of the repository:
```bash
MyShuttle-Java-app/
â”œâ”€â”€ pom.xml # Custom Maven build config
â”œâ”€â”€ docker-compose.yml # (Optional) Docker setup
â”œâ”€â”€ src/ # Java source code and webapp
â”‚ â”œâ”€â”€ main/
â”‚ â”‚ â”œâ”€â”€ java/ # Java code (Servlets, models, logic)
â”‚ â”‚ â””â”€â”€ webapp/ # JSPs, HTML/CSS/JS, WEB-INF
â”‚ â””â”€â”€ test/ # JUnit and TestNG tests
â”œâ”€â”€ target/ # Compiled classes, WAR output
â””â”€â”€ other scripts & resources
```

## Prerequisites

### Build Server

- Ubuntu (or a similar Linux distribution)
- OpenJDK 17
- Maven

### Deploy Server

- Ubuntu (or a similar Linux distribution)
- Apache Tomcat 9.0.110

---

## Build Server Setup

<img width="1920" height="1080" alt="1" src="https://github.com/user-attachments/assets/cc20b897-dba3-4e8f-8bcc-65a89b80daeb" />

### The following steps were followed to set up the build server:

1. **Update the system**:
    ```bash
    sudo apt -y update
    ```

2. **Clone the GitHub repository**:
    ```bash
    git clone https://github.com/HoussemDellai/MyShuttle-Java-app.git
    ```

3. **Verify Java version**:
    ```bash
    java --version
    ```

4. **Install OpenJDK 17**:
    ```bash
    sudo apt install openjdk-17-jre-headless
    ```

5. **Navigate into the project directory**:
    ```bash
    cd MyShuttle-Java-app/
    ```

6. **Install Maven**:
    ```bash
    sudo apt -y install maven
    ```

7. **Build the project**:
    ```bash
    mvn clean package
    ```

    The Maven `clean` command removes previous build artifacts, and `package` compiles the code and packages it into a `.war` file.

8. **Verify the build output**:
    After running `mvn package`, the `.war` file will be available in the `target/` directory of the project.

---

## Deploy Server Setup

<img width="1920" height="1080" alt="2" src="https://github.com/user-attachments/assets/6637a72e-5b10-4ad5-ae05-90275f8ff552" />

### On the deploy server, Apache Tomcat was used to deploy the `.war` file generated by Maven.

1. **Install Apache Tomcat**:
   Download the Tomcat archive and unzip it:

    ```bash
    wget https://dlcdn.apache.org/tomcat/tomcat-9/v9.0.110/bin/apache-tomcat-9.0.110.tar.gz
    tar -xvzf apache-tomcat-9.0.110.tar.gz
    ```

2. **Navigate to the Tomcat `webapps` directory**:
    ```bash
    cd apache-tomcat-9.0.110/webapps/
    ```

3. **Transfer the `.war` file from the build server**:
    The `.war` file generated on the build server is transferred to the `webapps/` directory of the Tomcat server (this step could be done using `scp` or another file transfer method).

4. **Verify the `.war` file**:
    ```bash
    ls
    ```

    Ensure that the `.war` file (e.g., `myshuttledev.war`) is present in the `webapps/` folder.

5. **Start Tomcat**:
    Start the Tomcat server using the following command:
    ```bash
    ./bin/startup.sh
    ```

    This will deploy the `.war` file and make the application available on the server.

---
6. **Edit Tomcat's `context.xml` file**:

<img width="1920" height="1080" alt="4" src="https://github.com/user-attachments/assets/89204647-98ee-441d-8cee-7b9ca067ae52" />

   If you made changes to the `context.xml` file, such as modifying settings for the `manager` application, these should be noted. For example:

    - Navigate to the `META-INF` directory within the `manager` app:
        ```bash
        cd apache-tomcat-9.0.110/webapps/manager/META-INF/
        ```
7. **Edit `tomcat-users.xml` for user roles and permissions**:

<img width="1920" height="1080" alt="5" src="https://github.com/user-attachments/assets/3e7f3b4b-f958-4c99-89b0-ba52d9ab63cc" />

    The `tomcat-users.xml` file is used to define roles and users, especially for admin access to the Tomcat Manager and Host Manager. Changes in this file might include creating a user with `manager-gui` and `admin-gui` roles for management purposes.

    - Navigate to the `conf/` directory:
        ```bash
        cd apache-tomcat-9.0.110/conf/
        ```

    - Edit the `tomcat-users.xml` file:
        ```bash
        sudo vi tomcat-users.xml
        ```
        

### Once the Tomcat server is running, you can access the application by navigating to the following URL:

<img width="1920" height="1080" alt="3" src="https://github.com/user-attachments/assets/03f45c3a-2d8a-44c8-b696-76618cdb9b43" />


## Build Configuration: Custom `pom.xml`

The project uses a customized `pom.xml` file to define dependencies, build plugins, and packaging configuration.  
This modified file is included in the repository as a standalone file named:

